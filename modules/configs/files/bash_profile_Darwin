set -o vi
shopt -s histappend
export PROMPT_COMMAND="history -a"
export gitROOT=/Users/jlundberg/git
export SVNROOT=/Users/jlundberg/svn
export EC2_HOME=~/.ec2
export PATH=$PATH:~/scripts:$EC2_HOME/bin:~/fabric
export JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Home
export AWS_CONFIG_FILE=~/.aws_cli

#Setup aws completion
complete -C aws_completer aws
parse_git_branch() {
  MYPWD=`pwd`
  if [[ "$MYPWD" =~ "/Volumes/" ]]; then
      echo ""
  else
      git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/\1/'
  fi
}

gitc() {
  git branch &> /dev/null
  if [ $? -ne 0 ];then
    echo "Not a Git branch, exiting"
    return 1
  else
    JIRA=$(parse_git_branch | sed -e 's/.*\/\(.*\)$/\1/')
    TEXT=$@
    git commit -a -m"$JIRA: $TEXT"
  fi
}

gitp() {
  git branch &> /dev/null
  if [ $? -ne 0 ];then
    echo "Not a Git branch, exiting"
    return 1
  else
    git_BRANCH=$(parse_git_branch)
    git push origin ${git_BRANCH}
  fi
}

git_clean () {
git branch -D $1
git push origin :$1
}

git_track () {
git branch --set-upstream-to=origin/$1 $1
}

describe () {
aws ec2 describe-instances --instance-ids $@  --query 'Reservations[*].Instances[*].[Tags]' --output=table
}

export PS1='\w: $(parse_git_branch)\n[\u@\[\e[32;40m\]\h\[\e[0m\]]'

alias app12='ssh -A app12.lax.adconion.com'
alias apps='cd ~/git/puppet-apps-modules'
alias builder1='ssh -A builder1.lab0.adconion.com'
alias dns='cd ~/git/dns-master/data/prod'
alias dnsup='ssh -l root ns-master.prod-aws.adconion.com "/usr/local/sbin/update_zone.sh "'
alias envs='find /Users/jlundberg/git/puppet-nodes -name "*.pp" | xargs grep -h "\$environment" | grep -v filter | sed -e "s/[ ]*//g" | sort |uniq'
alias fabric='cd ~/git/puppet-sys-modules/fabric/files'
alias gitd='cd ~/git'
alias hadoop='cd $SVNROOT/hadoop'
alias hie='cd ~/git/puppet-hiera/'
alias ketchup='git merge master -m"JAKE-1:ketchup"'
alias ldapsearch="ldapsearch -x -y /Users/jlundberg/.ldapanon "
alias ldap_group_ids='ldapsearch -b "ou=Group,dc=adconion,dc=com" gidNumber | grep gidNumber | sort -t ":" -k 2'
alias ll='ls -latr'
alias leap='ssh -A leap.muc.adconion.com'
alias sys='cd ~/git/puppet-sys-modules'
alias nodes='cd ~/git/puppet-nodes'
alias rpm='cd ~/git/rpmbuild'
alias search='find . -name .git -prune -o -type f -print | xargs grep '
alias svnlog='svn log -v svn+ssh://svn.adconion.com/svn/system-engineering | less'
alias viconfig='vi /Users/jakelundberg/.ssh/config'
alias vag='cd ~/git/vagrant'
alias words='cd ~/projects/python/words'


PATH="/Library/Frameworks/Python.framework/Versions/2.7/bin:${PATH}"
export PATH
